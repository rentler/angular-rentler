{"version":3,"sources":["angular-rentler.js"],"names":["angular","module","run","$templateCache","put","Directive","directive","restrict","scope","rValidator","controller","Ctrl","$scope","$attrs","vm","this","_","has","isFunction","validate","attr","validator","$inject","ValidateMsgDirective","link","element","attrs","ctrls","formCtrl","rValidatorCtrl","bind","rValidateMsg","fieldName","last","split","path","$watch","$submitted","messages","errors","require","replace","templateUrl","ValidateClassDirective","Validation","rValidateClass","length","removeClass","getClasses","error","addClass","success","ValidateDirective","ngModelCtrl","get","ngModel","isValid","$setValidity","FormDirective","$parse","elem","ctrl","submit","ngSubmit","btns","find","submitBtn","btn","i","type","toLowerCase","e","preventDefault","isUndefined","keyCode","which","click","on","pre","RequiredIfValidator","RequiredValidtor","value","instance","opts","required","requiredif","message","factory","RequiredValidator","isNull","isString","trim","isArray","isEmpty","RangeValidator","minmax","range","min","max","isBoolean","isNumber","PatternValidator","regexp","isRegExp","pattern","test","NumericValidator","isNaN","numeric","MandatoryValidator","mandatory","LengthValidator","field","EqualsValidator","otherValue","equals","isEqual","format","capitalize","EmailValidator","CompareValidator","compareField","compare","AlphanumericValidator","alphanumeric","Factory","$injector","create","schema","model","fields","_validate","forIn","validators","includes","validateIf","_this","validatorOpts","validatorName","collectionSchema","item","index","itemSchema","clone","mapKeys","key","factoryValidatorName","upperFirst","result","push","values","flatten","timestamp","now","pick","keys","service","ValidationProvider","setClasses","classes","merge","warning","$get","provider","InstantiableFactory","cloneDeep","assign","bindAll","functions","mixin","DataModelProvider","DataModel","$q","$http","Instantiable","id","url","buildUrl","progress","promise","method","then","response","data","relationalize","list","options","forEach","items","save","remove","http","name","resourceUrl","params","baseUrl","match","exec","param","indexOf","querystring","relations","modelName","datamodel","query","map","encodeURIComponent","join","setBaseUrl"],"mappings":"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","file":"angular-rentler.min.js","sourcesContent":["(function () {\n  'use strict';\n  \n  angular\n  \t.module('rentler.core', []);\n\t  \n}());\nangular.module(\"rentler.core\").run([\"$templateCache\", function($templateCache) {$templateCache.put(\"validation/directives/validateMsg/validateMsg.html\",\"<div class=\\\"help-block\\\" ng-if=\\\"messages.length > 0\\\">\\n  <div ng-repeat=\\\"message in messages | limitTo:1\\\">{{message}}</div>\\n</div>\");}]);\n(function () {\n  'use strict';\n  \n  angular\n    .module('rentler.core')\n    .directive('rValidator', Directive);\n    \n  Directive.$inject = [];\n  \n  function Directive() {\n    var directive = {\n      restrict: 'EA',\n      scope: {\n        rValidator: '='\n      },\n      controller: Ctrl\n    };\n    return directive;\n  }\n  \n  Ctrl.$inject = ['$scope', '$attrs'];\n  \n  function Ctrl($scope, $attrs) {\n    var vm = this;\n    \n    if (!_.has($scope.rValidator, 'validate') &&\n        !_.isFunction($scope.rValidator.validate))\n      throw 'Invalid Validator.';\n    \n    vm.attr = $attrs.rValidator;\n    vm.validator = $scope.rValidator;\n  }\n    \n})();\n(function () {\n  'use strict';\n\n  angular\n    .module('rentler.core')\n\t  .directive('rValidateMsg', ValidateMsgDirective);\n\n  ValidateMsgDirective.$inject = [];\n\n  function ValidateMsgDirective() {\n    var directive = {\n      restrict: 'A',\n      require: ['^form', '^rValidator'],\n      scope: true,\n      link: link,\n      replace: true,\n      templateUrl: 'validation/directives/validateMsg/validateMsg.html'\n    };\n\n    return directive;\n\n    function link(scope, element, attrs, ctrls) {\n      // Get controllers\n      var formCtrl = ctrls[0],\n          rValidatorCtrl = ctrls[1];\n\n      // Get binding\n      var bind = attrs.rValidateMsg;\n      \n      // Find field name\n      var fieldName = _.last(bind.split('.'));\n      \n      // Build path to field error\n      var path = rValidatorCtrl.attr;\n      \n      // Get validator\n      var validator = rValidatorCtrl.validator;\n\n      scope.$watch(path, function () {\n        // Not submitted no validation\n        if (!formCtrl.$submitted) return;\n        \n        // Add approriate classes\n        scope.messages = _.has(validator.errors, fieldName) ? validator.errors[fieldName] : [];\n      }, true);\n    }\n  }\n\n})();\n(function () {\n  'use strict';\n\n  angular\n  \t.module('rentler.core')\n\t  .directive('rValidateClass', ValidateClassDirective);\n\n  ValidateClassDirective.$inject = ['Validation'];\n\n  function ValidateClassDirective(Validation) {\n    var directive = {\n      restrict: 'A',\n      require: ['^form', '^rValidator'],\n      link: link\n    };\n\n    return directive;\n\n    function link(scope, element, attrs, ctrls) {\n      // Get controllers\n      var formCtrl = ctrls[0],\n          rValidatorCtrl = ctrls[1];\n\n      // Get binding\n      var bind = attrs.rValidateClass;\n      \n      // Find field name\n      var fieldName = _.last(bind.split('.'));\n      \n      // Build path to errors\n      var path = rValidatorCtrl.attr;\n      \n      // Get validator\n      var validator = rValidatorCtrl.validator;\n\n      scope.$watch(path, function () {\n        // Not submitted no validation\n        if (!formCtrl.$submitted || !_.has(validator.errors, fieldName)) return;\n        \n        // Get the number of errors for the field\n        var length = validator.errors[fieldName].length;\n        \n        // Add approriate classes\n        if (length === 0) element.removeClass(Validation.getClasses().error).addClass(Validation.getClasses().success);\n        else if (length > 0) element.addClass(Validation.getClasses().error).removeClass(Validation.getClasses().success);\n      }, true);\n    }\n  }\n\n}());\n(function () {\n  'use strict';\n\n  angular\n    .module('rentler.core')\n    .directive('ngModel', ValidateDirective);\n\n  ValidateDirective.$inject = [];\n\n  function ValidateDirective() {\n    var directive = {\n      restrict: 'A',\n      require: ['ngModel', '?^rValidator'],\n      link: link\n    };\n\n    return directive;\n\n    function link(scope, element, attrs, ctrls) {\n      // Get controllers\n      var ngModelCtrl = ctrls[0],\n          rValidatorCtrl = ctrls[1];\n\n      // If there is no validator then return\n      var validator = _.get(rValidatorCtrl, 'validator');\n      \n      if (!validator) return;\n      \n      // Watch for changes on the field\n      scope.$watch(attrs.ngModel, function () {\n        // Validate\n        validator.validate();\n        \n        // Find field name\n        var fieldName = _.last(attrs.ngModel.split('.'));\n        \n        // Get the number of errors for the field\n        var length = validator.errors[fieldName].length;\n        var isValid = length === 0;\n        \n        // Set validity\n        ngModelCtrl.$setValidity('', isValid);\n      });\n    }\n  }\n\n}());\n(function () {\n  'use strict';\n  \n  angular\n  \t.module('rentler.core')\n\t.directive('ngForm', FormDirective);\n\t\n  FormDirective.$inject = ['$parse'];\n  \n  function FormDirective($parse) {\n\t  var directive = {\n      restrict: 'EA',\n      require: 'form',\n      link: link\n    };\n    \n    return directive;\n    \n    function link(scope, elem, attrs, ctrl) {\n      // Find submit button\n      var btns = [elem.find('button'), elem.find('input')];\n      \n      var submitBtn = _.find(btns, function (btn) {\n        for (var i = 0; i < btn.length; i++)\n          return btn[i].type.toLowerCase() === 'submit';\n      });\n      \n      // Submit button clicked\n      angular.element(submitBtn).bind('click', function (e) {\n        e.preventDefault();\n        \n        if (!attrs.ngSubmit || !_.isUndefined(angular.element(this).attr('ng-click')))\n          return;\n        \n        submit();\n        \n        return;\n      });\n      \n      // Enter key\n      elem.bind('keydown', function (e) {\n        var keyCode = e.keyCode || e.which;\n        \n        if (keyCode !== 13) return;\n        \n        if (attrs.ngSubmit) submit();\n        \n        if (submitBtn) submitBtn.click();\n      });\n      \n      // Submit handler\n      elem.on('submit', function () {\n        submit();\n      });\n      \n      // Submit\n      function submit() {\n        ctrl.$submitted = true;\n        $parse(attrs.ngSubmit)(scope);\n      }\n    }\n  }\n  \n})();\n(function () {\n  'use strict';\n\n  angular\n  \t.module('rentler.core')\n\t  .directive('form', FormDirective);\n\n  FormDirective.$inject = [];\n\n  function FormDirective() {\n    var directive = {\n      restrict: 'E',\n      require: '^form',\n      link: {\n        pre: pre\n      }\n    };\n\n    return directive;\n\n    function pre(scope, element, attrs, ctrl) {\n      element.on('submit', function () {\n        ctrl.$submitted = true;\n      });\n    }\n  }\n\n}());\n(function () {\n  'use strict';\n  \n  angular\n  \t.module('rentler.core')\n\t.factory('RequiredIfValidator', RequiredIfValidator);\n\t\n  RequiredIfValidator.$inject = ['RequiredValidator'];\n  \n  function RequiredIfValidator(RequiredValidtor) {\n\tfunction validate(value, instance, opts) {\n\t  if (!opts || !_.isFunction(opts))\n\t  \treturn true;\n\t  \n\t  var required = opts(instance);\n\t  \n\t  return RequiredValidtor.validate(value, instance, required);\n\t}\n\t\n\tvar requiredif = {\n\t  message: 'Required',\n\t  validate: validate\n\t};\n\t\n\treturn requiredif;\n  }\n\t\n})();\n(function () {\n  'use strict';\n\n  angular\n    .module('rentler.core')\n    .factory('RequiredValidator', RequiredValidator);\n\n  RequiredValidator.$inject = [];\n\n  function RequiredValidator() {\n    function validate(value, instance, opts) {\n      if (!opts)\n        return true;\n\n      return !(_.isNull(value) || _.isUndefined(value) || (_.isString(value) && _.trim(value) === '') || (_.isArray(value) && _.isEmpty(value)));\n    }\n\n    var required = {\n      message: 'Required',\n      validate: validate\n    };\n\n    return required;\n  }\n\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('rentler.core')\n    .factory('RangeValidator', RangeValidator);\n\n  RangeValidator.$inject = [];\n\n  function RangeValidator() {\n    function validate(value, instance, opts) {\n      if (!opts)\n        return true;\n        \n      if (_.isUndefined(value) || _.isNull(value))\n        return true;\n\n      var minmax = _.isArray(opts) ? opts : opts.range,\n          min = minmax[0] || value,\n          max = minmax[1] || value;\n\n      if (_.isBoolean(value))\n        return false;\n        \n      if (_.isArray(value))\n        return value.length >= min && value.length <= max;\n\n      return _.isNumber(+value) && +value >= min && +value <= max;\n    }\n\n    var range = {\n      validate: validate,\n      message: 'Invalid'\n    };\n\n    return range;\n  }\n\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('rentler.core')\n    .factory('PatternValidator', PatternValidator);\n\n  PatternValidator.$inject = [];\n\n  function PatternValidator() {\n    function validate(value, instance, opts) {\n      if (!opts)\n        return true;\n        \n      if (_.isUndefined(value) || _.isNull(value))\n        return true;\n\n      var regexp = _.isRegExp(opts) ? opts : opts.pattern;\n\n      return regexp.test(value);\n    }\n\n    var pattern = {\n      message: 'Field is invalid.',\n      validate: validate\n    };\n\n    return pattern;\n  }\n\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('rentler.core')\n    .factory('NumericValidator', NumericValidator);\n\n  NumericValidator.$inject = [];\n\n  function NumericValidator() {\n    function validate(value, instance, opts) {\n      if (!opts)\n        return true;\n        \n      if (_.isNumber(value) || _.isUndefined(value) || _.isNull(value))\n        return true;\n\n      return _.isString(value) && !_.isNaN(+value);\n    }\n\n    var numeric = {\n      message: 'Must Be a Number',\n      validate: validate\n    };\n\n    return numeric;\n  }\n\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('rentler.core')\n    .factory('MandatoryValidator', MandatoryValidator);\n\n  MandatoryValidator.$inject = [];\n\n  function MandatoryValidator() {\n    function validate(value, instance, opts) {\n      if (!opts)\n        return true;\n\n      return _.isBoolean(value) && value === true;\n    }\n\n    var mandatory = {\n      message: 'Must Agree to Continue',\n      validate: validate\n    };\n\n    return mandatory;\n  }\n\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('rentler.core')\n    .factory('LengthValidator', LengthValidator);\n\n  LengthValidator.$inject = [];\n\n  function LengthValidator() {\n    function validate(value, instance, opts) {\n      if (!opts || !value)\n        return true;\n\n      var minmax = _.isArray(opts) ? opts : opts.length,\n          min = minmax[0] || (value ? value.length : 0),\n          max = minmax[1] || (value ? value.length : 0);\n\n      return (_.isString(value) || _.isArray(value)) && value.length >= min && value.length <= max;\n    }\n\n    var length = {\n      validate: validate,\n      message: function (field, opts) {\n        if (_.isNumber(opts[0]) && !_.isNumber(opts[1]))\n          return 'Must Be At Least ' + opts[0] + ' Characters Long';\n        else if (!_.isNumber(opts[0]) && _.isNumber(opts[1]))\n          return 'Must Be Under ' + opts[1] + ' Characters Long';\n        else\n          return 'Must Be ' + opts[0] + 'â€“' + opts[1] + ' Characters Long';\n      }\n    };\n\n    return length;\n  }\n\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('rentler.core')\n    .factory('EqualsValidator', EqualsValidator);\n\n  function EqualsValidator() {\n    var equals = {\n      validate: validate,\n      message: function (field, opts) {\n        return _.format('{0} Must Match {1}',\n          _.capitalize(field),\n          opts);\n      }\n    };\n\n    function validate(value, instance, opts) {\n      if (_.isUndefined(value) || _.isNull(value))\n        return true;\n      \n      var otherValue = _.has(opts, 'equals') ? opts.equals : opts;\n\n      return _.isEqual(value, otherValue);\n    }\n\n    return equals;\n  }\n\n}());\n\n(function () {\n  'use strict';\n\n  angular\n    .module('rentler.core')\n    .factory('EmailValidator', EmailValidator);\n\n  EmailValidator.$inject = [];\n\n  function EmailValidator() {\n    function validate(value, instance, opts) {\n      if (!opts)\n        return true;\n        \n      if (_.isUndefined(value) || _.isNull(value))\n        return true;\n\n      var pattern = /^([\\w-]+(?:\\.[\\w-]+)*)@((?:[\\w-]+\\.)*\\w[\\w-]{0,66})\\.([a-z]{2,6}(?:\\.[a-z]{2})?)$/i;\n      return pattern.test(value);\n    }\n\n    var required = {\n      message: 'Invalid Email',\n      validate: validate\n    };\n\n    return required;\n  }\n\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('rentler.core')\n    .factory('CompareValidator', CompareValidator);\n\n  CompareValidator.$inject = [];\n\n  function CompareValidator() {\n    function validate(value, instance, opts) {\n      if (!opts)\n        return true;\n        \n      if (_.isUndefined(value) || _.isNull(value))\n        return true;\n\n      var compareField = _.isString(opts) ? opts : opts.compare;\n\n      return value === instance[compareField];\n    }\n\n    function message(field, opts) {\n      return _.format('Must Match', opts);\n    }\n\n    var compare = {\n      message: message,\n      validate: validate\n    };\n\n    return compare;\n  }\n\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('rentler.core')\n    .factory('AlphanumericValidator', AlphanumericValidator);\n\n  AlphanumericValidator.$inject = [];\n\n  function AlphanumericValidator() {\n    function validate(value, instance, opts) {\n      if (!opts)\n        return true;\n      \n      if (_.isUndefined(value) || _.isNull(value))\n        return true;\n\n      return _.isString(value);\n    }\n\n    var alphanumeric = {\n      message: 'Field must be alphanumeric.',\n      validate: validate\n    };\n\n    return alphanumeric;\n  }\n\n})();\n\n(function () {\n  'use strict';\n  \n  angular\n    .module('rentler.core')\n    .factory('Validator', Factory);\n    \n  Factory.$inject = ['$injector'];\n  \n  function Factory($injector) {\n    var service = {\n      create: create\n    };\n    \n    return service;\n    \n    function create(schema, model) {\n      var validator = {\n        validate: validate,\n        errors: {},\n        isValid: true,\n        timestamp: 0\n      };\n      \n      function validate(fields) {\n        var _this = this;\n        \n        _validate(schema);\n        \n        // _.forIn(schema, function (validators, field) {\n        //   // If field(s) are provided skip those that aren't included\n        //   if (fields && (_.isString(fields) && fields !== field) ||\n        //                 (_.isArray(fields) && !_.includes(fields, field)))\n        //     return;\n          \n        //   // Skip if validate function results in falsey\n        //   if (_.has(validators, 'validateIf') && \n        //       _.isFunction(validators.validateIf) && \n        //       !validators.validateIf(model))\n        //     return;\n            \n        //   // Reset validation for field\n        //   _this.errors[field] = [];\n          \n        //   _.forIn(validators, function (validatorOpts, validatorName) {\n        //     // Skip validate field as it is special\n        //     if (validatorName.toLowerCase() === 'validateif')\n        //       return;\n              \n        //     // Collections\n        //     if (validatorName === 'collection') {\n        //       var collectionSchema = validatorOpts;\n              \n        //       _.forIn(collectionSchema, function (collectionValidators, collectionField) {\n        //         _.forIn(model[field], function (item, index) {\n        //           // Call validate like you would normally\n        //           var itemFieldName = field + '[' + index + ']';\n        //           _.bind(_validate, _this, itemFieldName);\n        //           // validate(friends[0])\n        //         });\n        //       });\n              \n        //       return;\n        //     }\n              \n        //     // Get the validator and validate\n        //     var factoryValidatorName = _.upperFirst(validatorName) + 'Validator',\n        //         validator = $injector.get(factoryValidatorName),\n        //         isValid = validator.validate(model[field], model, validatorOpts);\n                \n        //     // Add any errors to the field if invalid\n        //     if (!isValid) {\n        //       var message = _.isString(validatorOpts.message) ? validatorOpts.message :\n        //                     _.isFunction(validatorOpts.message) ? validatorOpts.message(field, validatorOpts) :\n        //                     _.isString(validator.message) ? validator.message :\n        //                     _.isFunction(validator.message) ? validator.message(field, validatorOpts) :\n        //                     'Invalid';\n\n        //       _this.errors[field].push(message);\n        //     }\n        //   });\n        // });\n        \n        function _validate(schema) {\n          _.forIn(schema, function (validators, field) {\n            // If field(s) are provided skip those that aren't included\n            if (fields && (_.isString(fields) && fields !== field) ||\n                          (_.isArray(fields) && !_.includes(fields, field)))\n              return;\n            \n            // Special validateif method can be put on the validator\n            // in order to only validate if that function returns true\n            if (_.has(validators, 'validateIf') && \n                _.isFunction(validators.validateIf) && \n                !validators.validateIf(model))\n              return;\n              \n            // Reset validation for field\n            _this.errors[field] = [];\n            \n            _.forIn(validators, function (validatorOpts, validatorName) {\n              \n              // Skip validate field as it is special\n              // see the above comment\n              if (validatorName.toLowerCase() === 'validateif')\n                return;\n                \n              // Collections are a new addition allowing subschemas\n              if (validatorName === 'collection') {\n                var collectionSchema = validatorOpts;\n                \n                // build a schema out of the item in the collection\n                _.forIn(model[field], function (item, index) {\n                  var itemSchema = _.clone(collectionSchema);\n                  itemSchema = _.mapKeys(itemSchema, function (value, key) {\n                    return field + '[' + index + '].' + key;\n                  });\n\n                  _validate(itemSchema);\n                });\n                \n                return;\n              }\n                \n              // Get the validator and validate\n              var factoryValidatorName = _.upperFirst(validatorName) + 'Validator',\n                  validator = $injector.get(factoryValidatorName),\n                  isValid = validator.validate(_.result(model, field), model, validatorOpts);\n              \n              // Add any errors to the field if invalid\n              if (!isValid) {\n                var message = _.isString(validatorOpts.message) ? validatorOpts.message :\n                              _.isFunction(validatorOpts.message) ? validatorOpts.message(field, validatorOpts) :\n                              _.isString(validator.message) ? validator.message :\n                              _.isFunction(validator.message) ? validator.message(field, validatorOpts) :\n                              'Invalid';\n\n                _this.errors[field].push(message);\n              }\n            });\n          });\n        }\n        \n        _this.isValid = _(_this.errors)\n                          .values()\n                          .flatten()\n                          .value()\n                          .length === 0;\n        \n        _this.timestamp = _.now();\n        \n        var isValid = _(_this.errors)\n                        .pick(fields || _.keys(schema))\n                        .values()\n                        .flatten()\n                        .value()\n                        .length === 0;\n\n        return isValid;\n      }\n      \n      return validator;\n    }\n  }\n    \n})();\n(function () {\n  'use strict';\n  \n  angular\n    .module('rentler.core')\n  \t.provider('Validation', ValidationProvider);\n\t  \n  ValidationProvider.$inject = [];\n  \n  function ValidationProvider() {\n\tvar classes = {\n\t  success: 'has-success',\n\t  warning: 'has-warning',\n\t  error: 'has-error'\t\n\t};\n\t\n\tthis.setClasses = setClasses;\n\tthis.$get = Validation;\n\t\n\tfunction setClasses(opts) {\n\t  opts = _.pick(opts, _.keys(classes));\n\t  _.merge(classes, opts);\n\t}\n\t\n\tfunction Validation() {\n\t  var service = {\n\t\tgetClasses: getClasses\n\t  };\n\t  \n\t  return service;\n\t  \n\t  function getClasses() {\n\t\treturn classes;\n\t  }\n\t}\n  }\n  \n}());\n(function () {\n  'use strict';\n  \n  angular\n  \t.module('rentler.core')\n\t.factory('Instantiable', InstantiableFactory);\n\t\n  InstantiableFactory.$inject = [];\n  \n  function InstantiableFactory() {\n\tvar mixin = {\n\t  create: create\n\t};\n\t\n\treturn mixin;\n\t\n\tfunction create(opts) {\n\t  var _this = this;\n\t  \n\t  var instance = _.cloneDeep(_this);\n\t  \n\t  _.assign(instance, opts);\n\t  \n\t  _.bindAll(instance, _.functions(instance));\n    \n\t  return instance;\n\t}\n  }\n  \n}());\n(function () {\n  'use strict';\n\n  angular\n    .module('rentler.core')\n    .provider('DataModel', DataModelProvider);\n\n  DataModelProvider.$inject = [];\n\n  function DataModelProvider() {\n    var baseUrl;\n\n    this.setBaseUrl = function (value) {\n      baseUrl = value;\n    };\n\n    this.$get = DataModel;\n\n    DataModel.$inject = ['$q', '$http', '$injector', 'Instantiable'];\n\n    function DataModel($q, $http, $injector, Instantiable) {\n      \n      var mixin = {\n        get: get,\n        list: list,\n        save: save,\n        remove: remove,\n        http: http,\n        relationalize: relationalize,\n        progress: { }\n      };\n      \n      _.assign(mixin, _.cloneDeep(Instantiable));\n\n      return mixin;\n\n      function get(id) {\n        var _this = this;\n\n        var url = buildUrl(_this.url, id, _this);\n\n        _this.progress.get = true;\n\n        var promise = $http({\n          method: 'GET',\n          url: url\n        })\n        .then(function (response) {\n\n          _.assign(_this, response.data);\n\n          _this.relationalize();\n\n          return _this;\n        })\n        .finally(function () {\n          _this.progress.get = false;\n        });\n\n        return promise;\n      }\n\n      function list(options) {\n        var _this = this;\n\n        _this.progress.list = true;\n\n        var url = buildUrl(_this.url, null, _this, options);\n\n        var promise = $http({\n          method: 'GET',\n          url: url\n        })\n        .then(function (response) {\n          _.assign(_this, response.data);\n\n          _.assign(_this, {\n            // Pager helper functions here\n          });\n\n          _.forEach(_this.items, function (item) {\n            item = _this.create(item);\n          });\n\n          return _this;\n        })\n        .finally(function () {\n          _this.progress.list = false;\n        });\n\n        return promise;\n      }\n\n      function save() {\n        var _this = this;\n\n        _this.progress.save = true;\n\n        var url = buildUrl(_this.url, null, _this);\n        \n        var data = _.pick(_this, _.keys(_this.schema));\n\n        var promise = $http({\n          method: 'POST',\n          url: url,\n          data: data\n        })\n        .then(function (response) {\n          _.assign(_this, response.data);\n\n          _this.relationalize();\n\n          return _this;\n        })\n        .finally(function () {\n          _this.progress.save = false;\n        });\n\n        return promise;\n      }\n\n      function remove(id) {\n        var _this = this;\n\n        _this.progress.remove = true;\n\n        var url = buildUrl(_this.url, id, _this);\n\n        var promise = $http({\n          method: 'DELETE',\n          url: url\n        })\n        .finally(function () {\n          _this.progress.remove = false;\n        });\n\n        return promise;\n      }\n      \n      function http(opts) {\n        var _this = this;\n        \n        _this.progress[opts.name] = true;\n        \n        opts.url = buildUrl(_this.url + opts.url, null, _this);\n        \n        var promise = $http(opts)\n        .finally(function () {\n          _this.progress[opts.name] = false;\n        });\n        \n        return promise;\n      }\n\n      function buildUrl(resourceUrl, id, model, params) {\n        resourceUrl = baseUrl + resourceUrl;\n\n        var match;\n        var url = resourceUrl;\n        var pattern = /:(\\*)?[a-zA-Z0-9]+/g;\n\n        do {\n          match = pattern.exec(resourceUrl);\n\n          if (!match) continue;\n\n          var param = match[0];\n\n          var field = param.replace(/\\W+/g, '');\n\n          if (param.indexOf('*') > -1 && id) url = url.replace(param, id);\n          else if (_.has(model, field) && !_.isNull(_.result(model, field)) && !_.isUndefined(_.result(model, field))) url = url.replace(param, _.result(model, field));\n        } while (match);\n\n        url = url.replace(/\\/:\\*[a-zA-Z0-9]+/g, '');\n\n        if (params) url += querystring(params);\n\n        return url;\n      }\n\n      function relationalize() {\n        var _this = this;\n        \n        if (!_.has(_this, 'relations') || _.keys(_this.relations).length === 0) return;\n\n        _.forIn(_this.relations, function (modelName, field) {\n          if (!_.has(_this, field)) return;\n\n          var datamodel = $injector.get(modelName);\n          _this[field] = datamodel.create(_this[field]);\n        });\n      }\n      \n      function querystring(params) {\n        var query = _.map(params, function (value, key) {\n          return key + '=' + encodeURIComponent(value);\n        }).join('&');\n    \n        if (query.length > 0) query = '?' + query;\n    \n        return query;\n      }\n    }\n  }\n\n}());"],"sourceRoot":"/source/"}